<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Timing and Synchronisation | Hurley</title><meta name="description" content="The Eight Fallacies of Distributed Computing The network is reliable Latency is zero Bandwidth is infinite The network is secure Topology doesn’t change There is one administrator Transport cost is ze"><meta name="keywords" content="同步"><meta name="author" content="Hurley"><meta name="copyright" content="Hurley"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://raw.githubusercontent.com/HurleyJames/ImageHosting/master/icon.png"><link rel="canonical" href="https://hurleyjames.github.io/2019/12/23/Timing%20and%20Synchronisation/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="Timing and Synchronisation"><meta property="og:url" content="https://hurleyjames.github.io/2019/12/23/Timing%20and%20Synchronisation/"><meta property="og:site_name" content="Hurley"><meta property="og:description" content="The Eight Fallacies of Distributed Computing The network is reliable Latency is zero Bandwidth is infinite The network is secure Topology doesn’t change There is one administrator Transport cost is ze"><meta property="og:image" content="https://hurleyjames.github.io/../image/timing-and-sync.png"><meta property="article:published_time" content="2019-12-22T16:00:00.000Z"><meta property="article:modified_time" content="2020-07-21T00:18:03.545Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="prev" title="Fault Tolerance" href="https://hurleyjames.github.io/2019/12/23/Fault%20Tolerance/"><link rel="next" title="马尔可夫决策过程" href="https://hurleyjames.github.io/2019/12/20/%E9%A9%AC%E5%B0%94%E5%8F%AF%E5%A4%AB%E5%86%B3%E7%AD%96%E8%BF%87%E7%A8%8B/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://avatars1.githubusercontent.com/u/26319720?s=460&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">65</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">25</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">12</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><i class="fas fa-arrow-right" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Eight-Fallacies-of-Distributed-Computing"><span class="toc-number">1.</span> <span class="toc-text">The Eight Fallacies of Distributed Computing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#时钟同步"><span class="toc-number">2.</span> <span class="toc-text">时钟同步</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#物理时钟"><span class="toc-number">2.1.</span> <span class="toc-text">物理时钟</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#时钟同步算法"><span class="toc-number">2.2.</span> <span class="toc-text">时钟同步算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Cristian’s-Algorithm"><span class="toc-number">2.2.1.</span> <span class="toc-text">Cristian’s Algorithm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Berkeley-Algorithm"><span class="toc-number">2.2.2.</span> <span class="toc-text">Berkeley Algorithm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Bully-Algorithm"><span class="toc-number">2.2.3.</span> <span class="toc-text">Bully Algorithm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#网络时间协议"><span class="toc-number">2.2.4.</span> <span class="toc-text">网络时间协议</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/../image/timing-and-sync.png)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Hurley</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Timing and Synchronisation</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2019-12-23 00:00:00"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2019-12-23</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-07-21 08:18:03"><i class="fas fa-history fa-fw"></i> 更新于 2020-07-21</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/">分布式系统</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>字数总计:</span><span class="word-count">1.2k</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>阅读时长: 5 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="The-Eight-Fallacies-of-Distributed-Computing"><a href="#The-Eight-Fallacies-of-Distributed-Computing" class="headerlink" title="The Eight Fallacies of Distributed Computing"></a>The Eight Fallacies of Distributed Computing</h2><ul>
<li>The network is reliable</li>
<li>Latency is zero</li>
<li>Bandwidth is infinite</li>
<li>The network is secure</li>
<li>Topology doesn’t change</li>
<li>There is one administrator</li>
<li>Transport cost is zero</li>
<li>The network is homogeneous</li>
<li><font color=red>All blocks are synchronized</font>

</li>
</ul>
<p>第9大悖论即<strong>所有时钟是同步的</strong>。</p>
<a id="more"></a>
<h2 id="时钟同步"><a href="#时钟同步" class="headerlink" title="时钟同步"></a>时钟同步</h2><p>In a DS, there is <font color=red>no global agreement on time.</font></p>
<h3 id="物理时钟"><a href="#物理时钟" class="headerlink" title="物理时钟"></a>物理时钟</h3><p>几乎所有的计算机都有一个计时电路。但它们不是通常意义上的时钟，称为<strong>计时器（timer）</strong>更为掐当。这里还有几个概念：</p>
<ul>
<li>有两个计数器与每个石英晶体相关联，一个是<strong>计数器（counter）</strong>，另一个是<strong>保持寄存器（holding register）</strong></li>
<li>每次的中断称为一个时钟滴答（When counter reaches zero, a <font color=red>timer interrupt</font> or <font color=red>clock tick</font> is generated and counter is reloaded from a holding register）</li>
<li>时钟偏移：In a DS with <em>n</em> machines, all <em>n</em> crystals will run at slightly different rates, resulting in <font color=red>clock skew</font>.</li>
</ul>
<h3 id="时钟同步算法"><a href="#时钟同步算法" class="headerlink" title="时钟同步算法"></a>时钟同步算法</h3><h4 id="Cristian’s-Algorithm"><a href="#Cristian’s-Algorithm" class="headerlink" title="Cristian’s Algorithm"></a>Cristian’s Algorithm</h4><p>Cristian提出让客户与<strong>时间服务器</strong>（time server）联系。</p>
<p><img src= "/img/loading.gif" data-src="https://raw.githubusercontent.com/HurleyJames/ImageHosting/master/time.png" alt=""></p>
<p>如图所示，best estimate of one-way propagation time is <strong><em>(T1-T0-I)/2</em></strong>.</p>
<p><strong>例题：</strong><br>The client’s clock reads 5:26:08. The server’s clock reads 5:16:44 when they synchronize using Cristian’s algorithm. Assume RTT is 2 seconds. What is the time at the client after synchronization? Note: the time format is HH:MM:SS.</p>
<p><strong>解答：</strong></p>
<p>Cristian’s algorithm assumes that the server has an accurate clock. The client requests the time and sets its clock to the server’s time $+\frac{1}{2}(RTT)$. In this case, the RTT is 2 seconds, so the client set time after synchronization: $5:16:44 + \frac{1}{2}*2seconds = 5:16:45$</p>
<h4 id="Berkeley-Algorithm"><a href="#Berkeley-Algorithm" class="headerlink" title="Berkeley Algorithm"></a>Berkeley Algorithm</h4><p>Berkeley UNIX系统中的时间服务器（实际上是时间守护程序）是主动的，它定期地询问每台机器的时间。基于这些回答，它计算出一个平均时间，并告诉所有其他机器将它们的时钟快拨到一个新的时间，或者拨慢时间。</p>
<p><img src= "/img/loading.gif" data-src="https://raw.githubusercontent.com/HurleyJames/ImageHosting/master/bb.png" alt=""></p>
<p><strong>例题1：</strong></p>
<p>The client’s clock reads 5:26:00. The server’s clock reads 5:14:00 when they synchronize using the Berkeley algorithm. Assume message delays are negligible. What is the time at the client after synchronisation? Note: the time format is HH:MM:SS.</p>
<p><strong>解答：</strong></p>
<p>The Berkeley algorithm averages clocks among the entire group. In this case, the group has two members: the client and the server. The average of the two clocks is $(5:26:00+5:14:00)/2=5:20:00$. Both the client and server will be set at $5:20:00$.</p>
<p><strong>例题2：</strong></p>
<p>Consider a network consisting of 5 computers, A (coordinator), B, C, D, and E. At 08:45 the coordinator decides to synchronise the clock of all computers in the network. The time format is HH:MM. At that moment, the clock of the computers in the network shows the following: B(08:43), C(08:49), D(08:42), E(08:46). Apply the Berkeley clock synchronisation algorithm to this situation, show the stages of computation, and explain the outcome of the synchronisation. You may assume that the time needed for computation and for network communication is negligible.</p>
<p><strong>解答：</strong></p>
<p>由上图给出的例子作为解释，这里的同步是指由coordinator服务器发起的。coordinator服务器发送请求到所有slave服务器，接收到所有的slave服务器时间后，计算时间的平均值，然后将这个值回填至所有的服务器。其中也包括coordinator服务器。A服务器即coordinator请求时的时间是08:45，B、C、D、E的服务器时间分别是08：43、08：49、08：42、08：46。所以这4台服务器收到请求后分别返回与coordinator的时间差-2、+4、-3、+1。coordinator接收到这两个值后进行计算$(-2+4-3+1)/3=0$。说明时钟走过的时间为0，可忽略。然后$0-(-2)=2，0-4=-4，0-(-3)=3，0-1=-1$。分别将这四个值回填给另外四台服务器。</p>
<h4 id="Bully-Algorithm"><a href="#Bully-Algorithm" class="headerlink" title="Bully Algorithm"></a>Bully Algorithm</h4><p>当任何一个进程发现协作者不再响应请求时，它就发起一次选举。进程P按如下过程主持一次选举：</p>
<ol>
<li>P向所有编号比它大的进程发送一个Election消息；</li>
<li>如果无人响应，P获胜并称为协作者;</li>
<li>如果有编号比它大的进程响应，则由响应者接管选举工作。P的工作完成。</li>
</ol>
<p><img src= "/img/loading.gif" data-src="https://raw.githubusercontent.com/HurleyJames/ImageHosting/master/Snipaste_2020-01-15_17-08-42.png" alt=""></p>
<h4 id="网络时间协议"><a href="#网络时间协议" class="headerlink" title="网络时间协议"></a>网络时间协议</h4><p>网络时间协议（network time protocol, NTP）在服务器之间创建了两条连接。换句话说，B也可以探查A的当前时间。</p>
<p>原则上，对称地应用NTP也可以让B参照A来调整它的时钟。但是，如果已知B的时钟更精确，那么这种调整就不应该了。所以，NTP把服务器分成多个层。含有<strong>参考时钟</strong>（reference clock）的服务器称为<strong>1层服务器</strong>（stratum-1 server）（时钟本身为0层）。</p>
<p>当A与B联系时，如果它的层比B的层要高，那么它就只调整自己的时间。经过同步化后，A将比B高一层。如果B是k层服务器，且A的初始层已经大于k，那么，经过时间调整后，A就变成（k+1）层服务器。由于NTP的对称性，如果A的层数比B的低，那么B将按照A来调整自己。</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined" target="_blank" rel="noopener">Hurley</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://hurleyjames.github.io/2019/12/23/Timing%20and%20Synchronisation/">https://hurleyjames.github.io/2019/12/23/Timing and Synchronisation/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://hurleyjames.github.io" target="_blank">Hurley</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%90%8C%E6%AD%A5/">同步</a></div><div class="post_share"><div class="social-share" data-image="/../image/linked-list-cycle.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><button class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/images/wechat.JPG" alt="wechat" onclick="window.open('/images/wechat.JPG')"/><div class="post-qr-code__desc">wechat</div></li><li class="reward-item"><img class="post-qr-code__img" src="/images/alipay.JPG" alt="alipay" onclick="window.open('/images/alipay.JPG')"/><div class="post-qr-code__desc">alipay</div></li></ul></div></button></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2019/12/23/Fault%20Tolerance/"><img class="prev-cover" data-src="/../image/fault-tolerance.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Fault Tolerance</div></div></a></div><div class="next-post pull-right"><a href="/2019/12/20/%E9%A9%AC%E5%B0%94%E5%8F%AF%E5%A4%AB%E5%86%B3%E7%AD%96%E8%BF%87%E7%A8%8B/"><img class="next-cover" data-src="/../image/markov-decision-process.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">马尔可夫决策过程</div></div></a></div></nav></article></main><footer id="footer" style="background-image: url(/../image/timing-and-sync.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2020 By Hurley</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">随时意气风发，独自声势浩大</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script></body></html>